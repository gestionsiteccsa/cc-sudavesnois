function initMainNavigation(){const e=document.querySelectorAll(".nav-dropdown > button");function t(){document.querySelectorAll(".submenu-level-2").forEach((e=>{e.getBoundingClientRect().right>window.innerWidth?e.classList.add("submenu-right"):e.classList.remove("submenu-right")}))}window.addEventListener("resize",t);document.querySelectorAll('button[aria-haspopup="true"]').forEach((s=>{const i=s.getAttribute("aria-controls"),a=document.getElementById(i);a&&(s.addEventListener("click",(i=>{i.preventDefault(),i.stopPropagation();const r="true"===s.getAttribute("aria-expanded");if(null!==s.closest(".submenu-level-1")){s.closest(".submenu-level-1").querySelectorAll('button[aria-haspopup="true"]').forEach((e=>{if(e!==s){const t=e.getAttribute("aria-controls"),s=document.getElementById(t);s&&(e.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true"),s.classList.add("hidden"),s.classList.remove("submenu-visible"),s.classList.add("opacity-0"),s.classList.remove("opacity-100"))}}))}else e.forEach((e=>{if(e!==s){const t=e.getAttribute("aria-controls"),s=document.getElementById(t);s&&(e.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true"),s.classList.add("hidden"),s.classList.remove("submenu-visible"),s.classList.add("opacity-0"),s.classList.remove("opacity-100"))}}));s.setAttribute("aria-expanded",!r),a.setAttribute("aria-hidden",r),r?(a.classList.add("hidden"),a.classList.remove("submenu-visible"),a.classList.add("opacity-0"),a.classList.remove("opacity-100")):(a.classList.remove("hidden"),a.classList.add("submenu-visible"),a.classList.remove("opacity-0"),a.classList.add("opacity-100"),t())})),s.addEventListener("keydown",(e=>{if("Enter"===e.key||" "===e.key)e.preventDefault(),s.click();else if("Escape"===e.key)s.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"),a.classList.add("hidden"),a.classList.remove("submenu-visible"),a.classList.add("opacity-0"),a.classList.remove("opacity-100"),s.focus();else if("ArrowDown"===e.key&&"true"===s.getAttribute("aria-expanded")){e.preventDefault();const t=a.querySelector("a, button");t&&t.focus()}})),a.addEventListener("keydown",(e=>{const t=a.querySelectorAll("a, button"),i=t[0];t[t.length-1];"ArrowUp"===e.key&&document.activeElement===i?(e.preventDefault(),s.focus()):"Escape"===e.key&&(e.preventDefault(),s.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"),a.classList.add("hidden"),a.classList.remove("submenu-visible"),a.classList.add("opacity-0"),a.classList.remove("opacity-100"),s.focus())})))})),document.addEventListener("click",(e=>{e.target.closest(".nav-dropdown")||document.querySelectorAll('button[aria-haspopup="true"]').forEach((e=>{const t=e.getAttribute("aria-controls"),s=document.getElementById(t);s&&(e.setAttribute("aria-expanded","false"),s.setAttribute("aria-hidden","true"),s.classList.add("hidden"),s.classList.remove("submenu-visible"),s.classList.add("opacity-0"),s.classList.remove("opacity-100"))}))}))}function initMobileMenu(){const e=document.getElementById("menu-toggle"),t=document.getElementById("mobile-menu"),s=document.getElementById("menu-icon-open"),i=document.getElementById("menu-icon-close");e&&t&&e.addEventListener("click",(function(){t.classList.toggle("hidden"),s.classList.toggle("hidden"),i.classList.toggle("hidden");const a="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!a)}));document.querySelectorAll("#mobile-menu button[aria-controls]").forEach((e=>{e.addEventListener("click",(function(){const e=this.getAttribute("aria-controls"),t=document.getElementById(e),s="true"===this.getAttribute("aria-expanded");this.closest("ul").querySelectorAll("button[aria-controls]").forEach((e=>{if(e!==this){const t=e.getAttribute("aria-controls"),s=document.getElementById(t);s&&!s.classList.contains("hidden")&&(s.classList.add("hidden"),e.setAttribute("aria-expanded","false"),e.querySelector("svg").classList.remove("rotate-180"))}})),t&&(t.classList.toggle("hidden"),this.setAttribute("aria-expanded",!s),this.querySelector("svg").classList.toggle("rotate-180"))}))})),document.addEventListener("click",(function(a){!t||t.classList.contains("hidden")||t.contains(a.target)||e.contains(a.target)||(t.classList.add("hidden"),s.classList.remove("hidden"),i.classList.add("hidden"),e.setAttribute("aria-expanded","false"))}))}function initBackToTopButton(){const e=document.getElementById("back-to-top");e&&(window.addEventListener("scroll",(function(){window.pageYOffset>300?(e.classList.remove("opacity-0","invisible"),e.classList.add("opacity-100","visible")):(e.classList.remove("opacity-100","visible"),e.classList.add("opacity-0","invisible"))})),e.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})))}function initScrollAnimations(){const e=document.querySelectorAll(".animate-on-scroll");if(e.length>0){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("animate-active")}))}),{threshold:.1});e.forEach((e=>{t.observe(e)}))}const t=document.querySelectorAll(".reveal");if(t.length>0){const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("active")}))}),{threshold:.1});t.forEach((t=>{e.observe(t)}))}}function initAccessibilityFeatures(){const e=document.getElementById("accessibility-button"),t=document.getElementById("accessibility-menu");if(e&&t){function s(s){e.setAttribute("aria-expanded",s),t.setAttribute("aria-hidden",!s),s?t.classList.remove("hidden"):t.classList.add("hidden")}e.addEventListener("click",(function(){s(!("true"===e.getAttribute("aria-expanded")))})),e.addEventListener("keydown",(function(t){if("Enter"===t.key||" "===t.key){t.preventDefault();s(!("true"===e.getAttribute("aria-expanded")))}})),document.addEventListener("click",(function(i){e.contains(i.target)||t.contains(i.target)||s(!1)})),t.addEventListener("keydown",(function(t){"Escape"===t.key&&(s(!1),e.focus())}))}const i=document.getElementById("contrast-toggle"),a=document.getElementById("contrast-reset");if(i){i.addEventListener("click",(function(){document.body.classList.toggle("high-contrast");const e=document.body.classList.contains("high-contrast");localStorage.setItem("high-contrast",e),i.setAttribute("aria-pressed",e),e?(i.classList.add("bg-primary","text-white"),i.classList.remove("border-gray-300","hover:bg-gray-100")):(i.classList.remove("bg-primary","text-white"),i.classList.add("border-gray-300","hover:bg-gray-100"))}));"true"===localStorage.getItem("high-contrast")&&(document.body.classList.add("high-contrast"),i.setAttribute("aria-pressed","true"),i.classList.add("bg-primary","text-white"),i.classList.remove("border-gray-300","hover:bg-gray-100"))}a&&a.addEventListener("click",(function(){document.body.classList.remove("high-contrast"),localStorage.removeItem("high-contrast"),i.setAttribute("aria-pressed","false"),i.classList.remove("bg-primary","text-white"),i.classList.add("border-gray-300","hover:bg-gray-100")}));const r=document.getElementById("font-size-increase"),n=document.getElementById("font-size-decrease"),o=document.getElementById("font-size-reset");let c=100;function d(){document.documentElement.style.fontSize=`${c}%`,localStorage.setItem("font-size",c)}r&&r.addEventListener("click",(function(){c<150&&(c+=10,d())})),n&&n.addEventListener("click",(function(){c>70&&(c-=10,d())})),o&&o.addEventListener("click",(function(){c=100,d()}));const l=localStorage.getItem("font-size");l&&(c=parseInt(l),d());const u=document.getElementById("line-height-toggle"),m=document.getElementById("line-height-reset");if(u){u.addEventListener("click",(function(){document.body.classList.toggle("increased-line-height");const e=document.body.classList.contains("increased-line-height");localStorage.setItem("increased-line-height",e),u.setAttribute("aria-pressed",e),e?(u.classList.add("bg-primary","text-white"),u.classList.remove("border-gray-300","hover:bg-gray-100")):(u.classList.remove("bg-primary","text-white"),u.classList.add("border-gray-300","hover:bg-gray-100"))}));"true"===localStorage.getItem("increased-line-height")&&(document.body.classList.add("increased-line-height"),u.setAttribute("aria-pressed","true"),u.classList.add("bg-primary","text-white"),u.classList.remove("border-gray-300","hover:bg-gray-100"))}m&&m.addEventListener("click",(function(){document.body.classList.remove("increased-line-height"),localStorage.removeItem("increased-line-height"),u.setAttribute("aria-pressed","false"),u.classList.remove("bg-primary","text-white"),u.classList.add("border-gray-300","hover:bg-gray-100")}));const g=document.getElementById("letter-spacing-toggle"),b=document.getElementById("letter-spacing-reset");if(g){g.addEventListener("click",(function(){document.body.classList.toggle("increased-letter-spacing");const e=document.body.classList.contains("increased-letter-spacing");localStorage.setItem("increased-letter-spacing",e),g.setAttribute("aria-pressed",e),e?(g.classList.add("bg-primary","text-white"),g.classList.remove("border-gray-300","hover:bg-gray-100")):(g.classList.remove("bg-primary","text-white"),g.classList.add("border-gray-300","hover:bg-gray-100"))}));"true"===localStorage.getItem("increased-letter-spacing")&&(document.body.classList.add("increased-letter-spacing"),g.setAttribute("aria-pressed","true"),g.classList.add("bg-primary","text-white"),g.classList.remove("border-gray-300","hover:bg-gray-100"))}b&&b.addEventListener("click",(function(){document.body.classList.remove("increased-letter-spacing"),localStorage.removeItem("increased-letter-spacing"),g.setAttribute("aria-pressed","false"),g.classList.remove("bg-primary","text-white"),g.classList.add("border-gray-300","hover:bg-gray-100")}));const y=document.getElementById("accessibility-reset-all");y&&y.addEventListener("click",(function(){document.body.classList.remove("high-contrast"),localStorage.removeItem("high-contrast"),i&&(i.setAttribute("aria-pressed","false"),i.classList.remove("bg-primary","text-white"),i.classList.add("border-gray-300","hover:bg-gray-100")),c=100,document.documentElement.style.fontSize="100%",localStorage.removeItem("font-size"),document.body.classList.remove("increased-line-height"),localStorage.removeItem("increased-line-height"),u&&(u.setAttribute("aria-pressed","false"),u.classList.remove("bg-primary","text-white"),u.classList.add("border-gray-300","hover:bg-gray-100")),document.body.classList.remove("increased-letter-spacing"),localStorage.removeItem("increased-letter-spacing"),g&&(g.setAttribute("aria-pressed","false"),g.classList.remove("bg-primary","text-white"),g.classList.add("border-gray-300","hover:bg-gray-100")),alert("Tous les paramètres d'accessibilité ont été réinitialisés.")}))}function validateField(e){const t=e.id,s=document.getElementById(`${t}-error`);resetFieldError(e);let i=!0,a="";if(e.hasAttribute("required")&&""===e.value.trim())i=!1,a="Ce champ est obligatoire";else if("email"===e.type&&""!==e.value.trim()){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(i=!1,a="Veuillez entrer une adresse email valide")}else if("tel"===e.type&&""!==e.value.trim()){/^(?:(?:\+|00)33|0)\s*[1-9](?:[\s.-]*\d{2}){4}$/.test(e.value)||(i=!1,a="Veuillez entrer un numéro de téléphone valide")}else"checkbox"===e.type&&e.hasAttribute("required")&&!e.checked&&(i=!1,a="Vous devez accepter cette condition");return i||(e.setAttribute("aria-invalid","true"),s&&(s.textContent=a,s.classList.remove("hidden"))),i}function resetFieldError(e){const t=e.id,s=document.getElementById(`${t}-error`);e.setAttribute("aria-invalid","false"),s&&(s.textContent="",s.classList.add("hidden"))}function showFormMessage(e,t){const s=document.getElementById("form-feedback");s.className="p-4 rounded-md mb-6 "+("error"===t?"bg-red-600":"bg-green-600"),s.textContent=e,s.classList.remove("hidden"),"success"===t&&setTimeout((()=>{s.classList.add("opacity-0"),setTimeout((()=>{s.classList.add("hidden"),s.classList.remove("opacity-0")}),300)}),5e3)}function initSearchForm(){const e=document.getElementById("search-toggle"),t=document.getElementById("search-form"),s=document.getElementById("search-input");if(e&&t&&s){function i(s){e.setAttribute("aria-expanded",s),t.setAttribute("aria-hidden",!s),s?t.classList.remove("hidden"):t.classList.add("hidden")}e.addEventListener("click",(function(){i(!("true"===e.getAttribute("aria-expanded")))})),e.addEventListener("keydown",(function(t){if("Enter"===t.key||" "===t.key){t.preventDefault();const a="true"===e.getAttribute("aria-expanded");i(!a),a||setTimeout((()=>{s.focus()}),100)}})),s.addEventListener("keydown",(function(t){"Escape"===t.key&&(t.preventDefault(),i(!1),e.focus())})),document.addEventListener("click",(function(s){e.contains(s.target)||t.contains(s.target)||i(!1)}))}}document.addEventListener("DOMContentLoaded",(function(){initMainNavigation(),initMobileMenu(),initBackToTopButton(),initScrollAnimations(),initAccessibilityFeatures(),initSearchForm()}));