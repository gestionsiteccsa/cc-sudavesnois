{% extends 'base.html' %}
{% load static %}
{% load date_filters %}
{% block styles %}
<link rel="stylesheet" href="{% static 'css/comptes-rendus.css' %}">
{% endblock %}
{% block content %}

<!-- Contenu principal -->
<main id="main-content">
    <!-- Bannière -->
    <section class="relative bg-gradient-to-r from-primary to-primary/80 py-16 md:py-24">
        <div class="container mx-auto px-4 md:px-6">
            <div class="max-w-4xl mx-auto text-center text-white">
                <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4">Actes administratifs</h1>
                <p class="text-lg md:text-xl opacity-90 max-w-3xl mx-auto mb-8">Consultez les délibérations, décisions et arrêtés de la communauté de communes Sud-Avesnois</p>
            </div>
        </div>
        <!-- Motif décoratif -->
        <div class="absolute bottom-0 left-0 right-0 h-8 bg-white" style="clip-path: polygon(0 100%, 100% 100%, 0 0);"></div>
        <div class="absolute bottom-0 left-0 right-0 h-8 bg-white opacity-30" style="clip-path: polygon(100% 100%, 100% 0, 0 100%);"></div>
    </section>

    <!-- Introduction -->
    <section class="py-12 bg-white dark:bg-gray-800">
        <div class="container mx-auto px-4 md:px-6">
            <div class="max-w-4xl mx-auto">
                <div class="bg-white dark:bg-gray-800 p-6 md:p-8 rounded-lg shadow-md dark:shadow-gray-900">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-200 mb-4">Accès aux actes administratifs</h2>
                    
                    
                    <div class="flex items-center p-4 bg-blue-50 dark:bg-blue-900 rounded-md mb-8">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary dark:text-blue-400 mr-4 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p class="text-gray-700 dark:text-gray-300">
                            Conformément aux articles L. 5211-3 et suivants du Code général des collectivités territoriales et à l'ordonnance n° 2021-1310 du 7 octobre 2021 portant réforme des règles de publicité, d'entrée en vigueur et de conservation des actes pris par les collectivités territoriales et leurs groupements, le compte rendu de la séance du conseil communautaire est publié et mis en ligne sur le site internet de la communauté de communes conformément aux obligations de publicité des actes de l'EPCI en vigueur depuis le 1er juillet 2022.
                        </p>
                    </div>

                    <!-- Liens vers les documents -->
                    <div class="bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-6 text-center">
                        
                        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                            <a href="https://ccsa59-my.sharepoint.com/:f:/g/personal/j_brechoire_cc-sudavesnois_fr/IgCxVIWn-ZiMT5pb4t2BoJhwAXR_4Y-WmhVUPcbvljTbNpk?e=UEJAEK" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 dark:hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                                Arrêtés
                            </a>
                            <a href="https://ccsa59-my.sharepoint.com/:f:/g/personal/j_brechoire_cc-sudavesnois_fr/IgBj_YSTxvVuQpO1csrw3D5DAdMjcUHSnDf-vrhXFh8Rigo?e=xLva3J" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-purple-600 dark:bg-purple-600 text-white rounded-md font-medium hover:bg-purple-700 dark:hover:bg-purple-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                                Décisions
                            </a>
                            <a href="https://ccsa59-my.sharepoint.com/:f:/g/personal/j_brechoire_cc-sudavesnois_fr/IgCqA4vOvQCAToHRjUWvFaHoAal2hfmTgk3VvMYkGP25V3A?e=gcklAE" target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-red-600 dark:bg-red-600 text-white rounded-md font-medium hover:bg-red-700 dark:hover:bg-red-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                                Délibérations
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Calendrier des prochains conseils -->
    <section class="py-12 bg-gray-50 dark:bg-gray-800">
        <div class="container mx-auto px-4 md:px-6">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-800 dark:text-gray-200 mb-8">Prochains conseils communautaires</h2>
                
                {% if conseils %}
                <ul class="space-y-8" role="list">
                    {% for conseil in conseils %}
                    <li role="listitem">
                        <article class="bg-white dark:bg-gray-800 rounded-xl shadow-lg dark:shadow-gray-900 overflow-hidden border-l-4 border-primary hover:shadow-xl transition-shadow duration-300">
                            <div class="p-6 sm:p-8 md:p-10">
                                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6 sm:gap-8">
                                    <!-- Date avec badge -->
                                    <div class="flex items-start sm:items-center space-x-4 sm:space-x-6">
                                        <div class="flex-shrink-0" aria-label="Date du conseil">
                                            <div class="w-16 h-16 bg-primary rounded-lg flex flex-col items-center justify-center text-white shadow-md" style="background-color: #006ab3;">
                                                <span class="text-xs font-semibold uppercase tracking-wide leading-tight">{{ conseil.date|mois_fr_abrege }}</span>
                                                <span class="text-2xl font-bold leading-none mt-0.5">{{ conseil.date|date:"d" }}</span>
                                            </div>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <time datetime="{{ conseil.date|date:'Y-m-d' }}" class="block text-base sm:text-lg font-semibold text-gray-900 dark:text-white">
                                                {{ conseil.date|date_fr_complete }}
                                            </time>
                                            {% if forloop.first %}
                                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary mt-2" aria-label="Prochain conseil communautaire">
                                                Prochain conseil
                                            </span>
                                            {% endif %}
                                        </div>
                                    </div>

                                    <!-- Détails (heure et lieu) -->
                                    <div class="flex flex-col sm:flex-row gap-6 sm:gap-8 ml-auto text-right">
                                        <!-- Heure -->
                                        <div>
                                            <div class="text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Heure</div>
                                            <time datetime="{{ conseil.date|date:'Y-m-d' }}T{{ conseil.hour|date:'H:i' }}" class="block text-sm sm:text-base font-semibold text-gray-900 dark:text-white">
                                                {{ conseil.hour.hour }}h{{ conseil.hour.minute|stringformat:"02d" }}
                                            </time>
                                        </div>

                                        <!-- Lieu -->
                                        <div class="min-w-0 flex-1">
                                            <div class="text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Lieu</div>
                                            <div class="text-sm sm:text-base font-semibold text-gray-900 dark:text-white">
                                                {{ conseil.place|default:"Lieu à communiquer" }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </article>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg dark:shadow-gray-900 p-6 sm:p-8 text-center" role="status" aria-live="polite">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 sm:h-16 sm:w-16 mx-auto text-gray-400 dark:text-gray-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <h3 class="text-lg sm:text-xl font-semibold text-gray-700 dark:text-gray-300 mb-2">Aucun conseil à venir</h3>
                    <p class="text-sm sm:text-base text-gray-500 dark:text-gray-400">Les prochaines dates de conseil communautaire seront publiées prochainement.</p>
                </div>
                {% endif %}

                <div class="mt-6 sm:mt-8 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 p-4 sm:p-5 rounded-lg" role="note" aria-label="Information sur l'accès aux séances">
                    <div class="flex items-start">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p class="text-xs sm:text-sm text-blue-800 dark:text-blue-200 leading-relaxed">
                            Les séances du conseil communautaire sont ouvertes au public, sauf lorsqu'il est décidé le huis clos.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

{% endblock %}
